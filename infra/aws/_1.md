---
description: AWS Certified Solutions Architect
---

# 시작하기

## Intro

- 이제 기초 지식을 쌓아야 한다.
- AWS 계정 설정과 ID 및 액세스 관리 서비스 정도 알아볼거고, 사용할 수 있는 몇 가지 인증 방법에 대해서 알아보도록 한다.
- 그리고 각각 기능들의 개념과 실습을 병행하면서 리소스 꼭 끄기!!

- 우선 ID 및 액세스 관리(IAM)와 관련된 몇가지 기본 개념을 다루도록 한다.
- **IAM**은 `사용자`, `그룹` 및 `정책`으로 **AWS 계정**에 대한 **보안 액세스**를 제공하는 서비스이다.
- IAM은 실습을 위한 전제 조건으로 필수로 이해하고 넘어가야하는 부분이다.

- 계정 생성과 `그룹`, `역할` 및 `정책`, `Multi-Factor Authentication`를 설정하는 것을 목표로 한다.

## IAM Users, Groups, Roles, and Policies

- [AWS Identity and Access Management(IAM)](https://aws.amazon.com/ko/iam/?nc2=h_ql_prod_se_iam)

### IAM 사용자

- 사용자는 `사람(User)` 또는 `서비스(Service)`를 나타내는 개체이다.
- `정책`을 `계정`과 **직접 연결**할 수 있으므로 사용자가 AWS에서 수행할 수 있는 작업을 설명하는 권한 목록이 있다.

- 기본적으로 사용자는 어떤 항목에도 엑세스 할 수 없다.
- AWS API, CLI, SDK 및 기타 개발 도구에 대한 접근을 위한 `액세스 키 ID`  및 `보안 액세스 키`를 사용자에 할당할 수 있다.

> **루트 계정**

- 루트 사용자 자격 증명은 계정과 암호를 만드는데 사용되는 이메일 주소이다.
- 루트 계정에는 제한 될 수 없는 전체 관리 권한이 있다.

- **루트 계정에 대한 모범 사례**
	- 루트 사용자 자격 증명은 사용하면 안된다.
	- 루트 사용자 자격 증명을 공유하면 안된다.
	- IAM 사용자를 생성하고 필요에 따라 관리 권한을 할당한다.
	- **MFA(Multi-Factor Authentication)**를 활성화한다.

> **서비스 계정**

- 서비스 계정으로 알려진 어플리케이션을 나타내도록 생성될 수 있다.
- AWS 계정당 최대 5000명의 사용자를 가질 수 있다.
- 각 사용자 계정에는 AWS 전체에서 사용자를 공유하게 식별하는 친숙한 이름과 ARN이 있다.
- API, AWS CLI를 사용하여 사용자를 생성할 때만 반환되는 고유 ID도 생성된다.

- **서비스 계정에 대한 모범 사례**
	- 사용자에 대한 개별 IAM 계정을 생성해야 한다. <br/> (계정을 공유하지 않는 것이 가장 좋다.)

- **액세스 키 ID** 및 **보안 액세스 키**는 암호와 동일하지 않으며 AWS 콘솔에 로그인 하는데 사용할 수 없다.
- 한 번만 생성할 수 있으며 손실되는 경우 다시 생성해야 한다.

- `암호 길이`, `복잡성` 등을 적용하기 위해 **암호 정책**을 정의할 수 있다.
- **IAM 정책**을 사용하여 `암호를 변경하는 기능`을 허용하거나 허용하지 않을 수 있다.
- **액세스 키**와 **비밀번호**는 정기적으로 변경해야 한다.

### 그룹

- 그룹은 사용자의 모임이며, 정책이 연결되어 있다.
- 그룹은 자격 증명이 아니며 IAM 정책에서 보안 주체로 식별될 수 없다.
- 그룹에 속한 사람들을 관련된 정책을 적용할 수 있다.
	- 권한 할당 시 최소 권한 원칙을 사용한다.

- `그룹을 중첩 할 수 없다.`

### 역할

- 역할은 신뢰할 수 있는 엔티티에 의해 생성된 다음 "**assumed**"되며 AWS 서비스 요청을 수행하기 위한 권한 집합을 정의한다.
- IAM 역할을 사용하면 영구적인 자격증명을 사용하지 않고 사용자 및 서비스에 대한 권한을 리소스에 위임할 수 있다.
- IAM 사용자 또는 AWS 서비스는 AWS API 호출에 사용할 수 있는 임시 보안 자격 증명을 얻는 역할을 맡을 수 있다.
	- 이를 통해 역할을 사용하여 위임할 수 있다.
	- 역할(암호 또는 액세스 키)과 연결된 자격 증명이 없다.
- IAM 사용자는 특정 작업에 대한 권한을 부여하는 역할을 일시적으로 맡을 수 있다.
	- 외부 ID 제공자를 사용하여 로그인하는 연합 사용자에게 역할을 할당할 수 있다.
	- 임시 자격 증명은 주로 IAM 역할과 함께 사용되며 자동으로 만료된다.

- 역할은 콘솔을 통해 임시로 "**assumed**"하거나 AWS CLI, API를 사용하여 프로그래밍 방식으로 "**assumed**"할 수 있다.

> **IAM roles with EC2 Instances**

- IAM 역할은 EC2 인스턴스에서 실행되는 애플리케이션에 인스턴스 프로파일을 사용하여 AWS API 요청에 대한 권한을 부여하는데 사용할 수 있다.
- 한 번에 하나의 역할만 EC2 인스턴스에 할당 할 수 있다.
- 역할은 EC2 인스턴스 생성 시 또는 그 이후 언제든지 할당할 수 있다.
- AWS CLI 또는 API 인스턴스를 사용하는 경우 프로필을 수동으로 생성해야 한다.
- 애플리케이션은 인스턴스 메타 데이터에서 임시 보안 자격 증명을 검색한다.

> **Role delegation**

- 두 가지 정책으로 IAM 역할을 생성
    - 권한 정책: 역할의 사용자에게 리소스에 대한 필수 권한을 부여한다.
    - 신뢰 정책: 역할을 맡을 수 있는 신뢰할 수 있는 계정을 지정한다.
- 와일드 카드(`*`)는 보안 주체로 지정할 수 없다.
- 또한 권한 정책은 신뢰할 수 있는 계정의 사용자에게 연결되어야 한다.

### 정책

- 정책은 권한을 정의하는 문서이다.
- 그룹 및 역할에 적용할 수 있다.
- 정책 문서는 JSON으로 작성된다.
- 모든 권한은 기본적으로 암시적으로 거부된다. 가장 제한적인 정책이 적용된다.
- IAM 정책 시뮬레이터는 액세스 제어 정책의 효과를 이해, 테스트 및 검증하는데 도움되는 도구이다.
- 조건 요소를 사용하여 추가 조건부 논리를 적용할 수 있다.
