---
description: 1장 DBMS 아키텍처
---

# 6장 SELECT 구문

## Intro

- 데이터베이스의 핵심이 되는 처리가 검색이다.
	- 검색은 데이터가 저장되어 있는 테이블에서 필요한 데이터를 뽑아내는 것이다.
	- 질의(query) 또는 추출(retrieve)이라 부른다.

### SELECT 구문

- SELECT
	- 데이터베이스에서 데이터를 검색할 때 사용하는 구문
	- 데이터를 `어떤 방법으로 선택`할 지 일절 쓰여 있지 않다는 것.
		- 어떤 방법으로 선택한다는 작업을 DBMS에 맡기게 된다.
	- 불명한 데이터도 공란으로 취급한다. 이를 NULL이라 한다.
- FROM
	- 데이터를 선택할 대상 테이블을 지정하는 구문
	- FROM 구를 입력하지 않아도 되는 경우는, SELECT 1처럼 상수를 선택하는 경우

### WHERE 구

- WHERE
	- SELECT 구문은 테이블에서 모든 데이터를 검색한다.
	- 특정 조건의 레코드를 선택하려는 경우 사용하는 구문

> WHERE 구의 다양한 조건 지정 

|연산자|의미|
|:---:|:---|
|=| ~ 와 같음 |
|<>| ~ 와 같지 않음 |
|>=| ~ 이상 |
|>| ~ 보다 큼 |
|<=| ~ 이하 |
|<| ~ 보다 작음 |

> 복합 필터 조건 추가

|연산자|의미|
|:---:|:---|
|AND| 그리고 |
|OR| 또는 |

- 이는 수학적으로 특정 조건에 따른 합집합을 구하는 것

> IN으로 OR 조건을 간단하게 작성하는 방법

- AND / OR을 사용해 다양한 조건을 지정할 수 있다.
- 상황에 따라 OR 조건을 많이 지정해야 할 수가 있다.

> NULL에 대한 처리

- NULL
	- IS NULL
	- IS NOT NULL

### GROUP BY 구

- 합계 또는 평균 등의 집계 연산을 SQL 구문으로 할 수 있도록 한다.

- 집계 함수

|연산자|의미|
|:---:|:---|
|COUNT|레코드 수를 계산|
|SUM|숫자를 더함|
|AVG|숫자의 평균을 구함|
|MAX|최댓값을 구함|
|MIN|최솟값을 구함|

- GROUP BY 구의 `()`는 키를 지정하지 않겠다는 뜻이다.
	- 이는 GROUP BY 구 자체를 생략하는 일이 많다.
	- 일부 DBMS에서는 지원하지 않으므로 주의가 필요

### HAVING 구

- 결과 집합에 또 다시 조건을 걸어 선택하는 기능
	- WHERE 구가 '레코드'에 조건을 지정하는 것
	- HAVING 구는 '집합'에 조건을 지정하는 기능
	
### ORDER BY 구

- 기본적으로 데이터베이스를 조회 할 때 레코드의 순서는 정렬되어 있지 않다.

- 결과 순서를 보장하기 위해서는 **`명시적으로 순서를 지정`**해야 한다.
	- `DESC`는 **`Descending Order(내림차순)`**
	- `ASC`는 **`Ascending Order(오름차순)`** SQL의 기본 설정

### 뷰와 서브쿼리

- 뷰는 데이터베이스 안에 저장한다는 점은 테이블과 같다.
	- 테이블과 달리 내부에 데이터를 보유하지 않는다.
	
- 뷰는 일반적인 테이블처럼 SELECT 구분에서 사용할 수 있다.

> **익명 뷰**

- 뷰는 사용 방법이 테이블과 같다.
- 내부에는 데이터를 보유하지 않는다는 점에서 테이블과 다르다.

- 뷰에서 데이터를 선택하는 SELECT 구문은, 실제로는 내부적으로 '추가적인 SELECT 구문'을 실행하는 중첩(nested)구조가 되는 것이다.

- FROM구에 직접 지정하는 SELECT 구문을 서브쿼리(subquery)라고 부른다.

> **서브쿼리를 사용한 편리한 조건 지정**

- 매칭(Matching)
	- IN으로 OR 조건을 간단하게 작성하는 방법
	- IN과 서브쿼리를 함께 사용하는 구문은 데이터가 변경되어도 따로 수정할 필요가 없다는 점에서 굉장히 편리하다.
	- 서브쿼리를 사용하면 IN 내부의 서브쿼리가 SELECT 구문 전체가 실행될 때마다 다시 실행된다.
	- 따라서 동적으로 상수 리스트를 생성하게 되어 데이터가 바뀌어도 알아서 처리해 준다.
